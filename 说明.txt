2022-05-03
1.本文对太阳能热水器的程序进行简单的描述
2.该程序能够测试温度和水位。
3.温度和水位都是通过测试电阻的方式完成的，但是温度的电阻比较恒定，而水位的电阻值不太好测试，后期才发现是通过脉冲信号完成的。
4.因为电路设计的原因，电阻的测试需要分时完成。两个引脚分别输出高低电平，即可测试温度和水位。（即A高B低时测试水温，而B高A低时测试水位，但不能同时测试水位和温度，分时即可。）
5.水温和水位都需要经过AD转换完成。他们的连接同一个AD采样引脚。
6.测试水位时，需要使用脉冲，我使用的是1000HZ，不同的频率（占空比50%），可能稳定性不一样，需要多次测试。
7.原部件中没有1302，增加了1302计时。
8.多数值都是实际测量的结果，不一定（肯定不）适用于所有的设备。
9.水温是热敏电阻，实际制作程序的时候，可以使用电阻模拟即可。温度在变化的边缘跳动比较明显，增加数值变化稳定之后再修改。
10.程序对温度和水位测试可用。
11.注意一下AD电压的问题，用调试器下载的时候，电压是5v，但是实际电源供电的时候是4.24v，这样会导致AD采样的基准电压有变化。
	所以呢，就要注意这个问题，最好一直使用供电电源。



2023-02-18
1.串口设置时间，需要16进制（bcd码）表示。
aa 17 49 00 60  表示设置时间为17点49分00秒，其中aa表示设置时间的帧头，60表示16进制的校验和（0x17+0x49+0x00）
使用16进制的方式发送。
2.串口上水电池阀控制 （16进制bb表示设置时间的帧头，0表示关闭，1表示开启，第三个字节为校验和，即等于第二个字节）
bb 00 00   表示关闭上水电磁阀，
bb 01 01   表示开启上水电池阀。




